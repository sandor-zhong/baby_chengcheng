{% extends 'base.html' %}

{% block extra_styles %}
<style>
.img-wrap { max-width: 100%; border-radius: 8px; overflow: hidden; background:#f8f9fa; display:flex; align-items:center; justify-content:center; }
.img-wrap img { max-width: 100%; max-height: 300px; object-fit: contain; }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
      <div class="card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5 class="mb-0">编辑时光</h5>
          <button type="button" class="btn btn-outline-danger btn-sm" onclick="showDeleteConfirm('确定删除这条时光吗？', '{{ url_for('delete_moment', moment_id=moment.id) }}', {})">删除</button>
        </div>
        <div class="card-body">
          <form action="{{ url_for('edit_moment', moment_id=moment.id) }}" method="post" enctype="multipart/form-data" class="row g-3">
            <div class="col-12">
              <label class="form-label">内容</label>
              <textarea name="content" class="form-control" rows="4" required>{{ moment.content }}</textarea>
            </div>
            <div class="col-12">
              <label class="form-label">图片（可选，重新选择将替换）</label>
              {% if moment.image_path %}
              <div class="img-wrap mb-2">
                <img src="{{ url_for('static', filename=moment.image_path) }}" alt="图片">
              </div>
              {% endif %}
              <input type="file" name="image" accept="image/*" class="form-control">
            </div>
            <div class="col-12 d-flex justify-content-between">
              <a href="{{ url_for('moments') }}" class="btn btn-outline-secondary">返回</a>
              <button class="btn btn-primary">保存</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}


